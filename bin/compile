#!/bin/bash

build=$1
cache=$2
env=$3

cmake_version="2.8.6"
cmake_url="http://www.cmake.org/files/v2.8/cmake-2.8.6.tar.gz"
cmake_file="cmake-${cmake_version}.tar.gz"
cmake_tar_dir="cmake-${cmake_version}"

cache_target=${cache}/${io_file}
build_target=${build}/.local
target=/app/.local

old_compile_url="https://raw.githubusercontent.com/tomwilshere/heroku-buildpack-ruby/master/bin/old_compile.rb"

# echo "Compiling cmake v${cmake_version}..."
# #Compile cmake
# curl -s ${cmake_url} > ${cmake_file}
# tar zxf ${cmake_file}
# cd ${cmake_tar_dir}
# ./bootstrap --prefix=${target}
# make
# make install
# PATH=${target}/bin:$PATH
# cd ..

echo "downloading old_compile"

echo ${build}
echo ${cache}
echo ${env}

curl -s ${old_compile_url} > old_compile.rb
chmod +x old_compile.rb
cat old_compile.rb
./old_compile.rb ${build} ${cache} ${env}